"use strict";
var fgClassModule = require('./fgClass');
var fgInstanceModule = require('./fgInstance');
;
var $fg = function (arg) {
    if (arg instanceof HTMLElement) {
        return $fg.byDom(arg);
    }
    ;
    if (typeof arg == "string") {
        return fgClassModule.fgClassDict[arg];
    }
    ;
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.default = $fg;
$fg.load = function (fgData) {
    if (Array.isArray(fgData)) {
        return fgData.map($fg.load);
    }
    ;
    return new fgClassModule.FgClass(fgData);
};
$fg.isFg = function (domNode) {
    return domNode.classList && domNode.classList.contains('fg');
};
var iidRe = /fg\-iid\-(\d+)/g;
var idRe = /fg\-(\d+)\-gid\-(\d+)/g;
$fg.byDom = function (domNode) {
    if (!domNode || !domNode.className) {
        return null;
    }
    ;
    if (!~domNode.className.split(' ').indexOf('fg')) {
        return null;
    }
    ;
    if (!domNode.id) {
        return null;
    }
    ;
    idRe.lastIndex = 0;
    var res = idRe.exec(domNode.id);
    if (!res) {
        return null;
    }
    ;
    var iid = parseInt(res[1]);
    return fgInstanceModule.getFgByIid(iid);
};
$fg.gapClosest = function (domNode) {
    while (true) {
        idRe.lastIndex = 0;
        var res = idRe.exec(domNode.id);
        if (!res) {
            domNode = domNode.parentNode;
            if (!domNode) {
                return null;
            }
            ;
            continue;
        }
        ;
        var iid = parseInt(res[1]);
        var fg = fgInstanceModule.getFgByIid(iid);
        var gid = parseInt(res[2]);
        return fg.gapStorage.gaps[gid];
    }
    ;
};
$fg.classes = fgClassModule.fgClassDict;
$fg.fgs = fgInstanceModule.fgInstanceTable;
$fg.jq = window['jQuery'];
window['$fg'] = $fg;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaGVscGVyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL2NsaWVudC9oZWxwZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLElBQVksYUFBYSxXQUFNLFdBQVcsQ0FBQyxDQUFBO0FBQzNDLElBQVksZ0JBQWdCLFdBQU0sY0FBYyxDQUFDLENBQUE7QUFJaEQsQ0FBQztBQUVGLElBQUksR0FBRyxHQUFXLFVBQVUsR0FBRztJQUM5QixFQUFFLENBQUMsQ0FBQyxHQUFHLFlBQVksV0FBVyxDQUFDLENBQUEsQ0FBQztRQUMvQixNQUFNLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQztJQUN2QixDQUFDO0lBQUEsQ0FBQztJQUNGLEVBQUUsQ0FBQyxDQUFDLE9BQU8sR0FBRyxJQUFJLFFBQVEsQ0FBQyxDQUFBLENBQUM7UUFDM0IsTUFBTSxDQUFDLGFBQWEsQ0FBQyxXQUFXLENBQUMsR0FBRyxDQUFDLENBQUM7SUFDdkMsQ0FBQztJQUFBLENBQUM7QUFDSCxDQUFDLENBQUM7QUFFRjtrQkFBZSxHQUFHLENBQUM7QUFFbkIsR0FBRyxDQUFDLElBQUksR0FBRyxVQUFTLE1BQU07SUFDekIsRUFBRSxDQUFDLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFBLENBQUM7UUFDMUIsTUFBTSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFDO0lBQzdCLENBQUM7SUFBQSxDQUFDO0lBQ0YsTUFBTSxDQUFDLElBQUksYUFBYSxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQztBQUMxQyxDQUFDLENBQUM7QUFFRixHQUFHLENBQUMsSUFBSSxHQUFHLFVBQVMsT0FBTztJQUMxQixNQUFNLENBQUMsT0FBTyxDQUFDLFNBQVMsSUFBSSxPQUFPLENBQUMsU0FBUyxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsQ0FBQztBQUM5RCxDQUFDLENBQUM7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