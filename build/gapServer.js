"use strict";
var gaps_1 = require('./gaps');
;
function parse(ast, html, parentMeta) {
    /*var name = ast.nodeName;
    var gap = gapTable[name];
    if (!gap){
        return false;
    };*/
    var matched = [];
    for (var i in gaps_1.default) {
        var gap = gaps_1.default[i];
        var meta = gap.parse(ast, html, parentMeta);
        if (meta) {
            matched.push({
                "gap": gap,
                "meta": meta
            });
        }
        ;
    }
    ;
    if (matched.length > 1) {
        var maxPrior_1 = Math.max.apply(Math, matched.map(function (item) {
            return item.gap.priority || 0;
        }));
        matched = matched.filter(function (item) {
            return (item.gap.priority || 0) === maxPrior_1;
        });
    }
    if (matched.length === 1) {
        return matched[0].meta;
    }
    ;
    if (matched.length === 0) {
        return null;
    }
    ;
    if (matched.length > 1) {
        throw new Error("Gap parsing conflict");
    }
    ;
    return null;
}
exports.parse = parse;
;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ2FwU2VydmVyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vc3JjL2dhcFNlcnZlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxZQUFZLENBQUM7QUFPYixxQkFBOEIsUUFBUSxDQUFDLENBQUE7QUFZdEMsQ0FBQztBQUVGLGVBQXNCLEdBQWEsRUFBRSxJQUFZLEVBQUUsVUFBZTtJQUNqRTs7OztRQUlJO0lBQ0osSUFBSSxPQUFPLEdBQWdCLEVBQUUsQ0FBQztJQUM5QixHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxjQUFJLENBQUMsQ0FBQSxDQUFDO1FBQ25CLElBQU0sR0FBRyxHQUFlLGNBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNoQyxJQUFNLElBQUksR0FBRyxHQUFHLENBQUMsS0FBSyxDQUFDLEdBQUcsRUFBRSxJQUFJLEVBQUUsVUFBVSxDQUFDLENBQUM7UUFDOUMsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUEsQ0FBQztZQUNULE9BQU8sQ0FBQyxJQUFJLENBQUM7Z0JBQ1osS0FBSyxFQUFFLEdBQUc7Z0JBQ1YsTUFBTSxFQUFFLElBQUk7YUFDWixDQUFDLENBQUM7UUFDSixDQUFDO1FBQUEsQ0FBQztJQUNILENBQUM7SUFBQSxDQUFDO0lBQ0YsRUFBRSxDQUFDLENBQUMsT0FBTyxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsQ0FBQSxDQUFDO1FBQ3ZCLElBQU0sVUFBUSxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLElBQUksRUFBRSxPQUFPLENBQUMsR0FBRyxDQUFDLFVBQVMsSUFBSTtZQUM5RCxNQUFNLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxRQUFRLElBQUksQ0FBQyxDQUFDO1FBQy9CLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDSixPQUFPLEdBQUcsT0FBTyxDQUFDLE1BQU0sQ0FBQyxVQUFTLElBQUk7WUFDckMsTUFBTSxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxRQUFRLElBQUksQ0FBQyxDQUFDLEtBQUssVUFBUSxDQUFDO1FBQzlDLENBQUMsQ0FBQyxDQUFDO0lBQ0osQ0FBQztJQUNELEVBQUUsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxNQUFNLEtBQUssQ0FBQyxDQUFDLENBQUEsQ0FBQztRQUN6QixNQUFNLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQztJQUN4QixDQUFDO0lBQUEsQ0FBQztJQUNGLEVBQUUsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxNQUFNLEtBQUssQ0FBQyxDQUFDLENBQUEsQ0FBQztRQUN6QixNQUFNLENBQUMsSUFBSSxDQUFDO0lBQ2IsQ0FBQztJQUFBLENBQUM7SUFDRixFQUFFLENBQUMsQ0FBQyxPQUFPLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxDQUFBLENBQUM7UUFDdkIsTUFBTSxJQUFJLEtBQUssQ0FBQyxzQkFBc0IsQ0FBQyxDQUFDO0lBQ3pDLENBQUM7SUFBQSxDQUFDO0lBQ0YsTUFBTSxDQUFDLElBQUksQ0FBQztBQUNiLENBQUM7QUFuQ2UsYUFBSyxRQW1DcEIsQ0FBQTtBQUFBLENBQUMifQ==