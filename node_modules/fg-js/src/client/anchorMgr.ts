"use strict";

import {Component} from './componentBase';
import {Gap} from './gapClassMgr';

export type Anchor = HTMLElement;
/**
 * Generates an id for an acnchor.
 * @param {Object} context - Fg containing the acnchor.
 * @param {Object} gap - Gap to which the acnchor is bind to.
 * @returns {string} Id of the anchor tag.
 */
function genId(context: Component, gap: Gap, kind: string = 'df'): string{
   	const id = ['fg', context.id, 'aid', gap.gid, kind].join('-');
    return id;
};

/**
 * Generates code for an acnchor.
 * @param {Object} context - Fg containing the acnchor.
 * @param {Object} gap - Gap to which the acnchor is bind to.
 * @returns {string} Html code of the anchor. 
 */
export function genCode(context: Component, gap: Gap, kind: string = 'df'): string{
    const code = '<script type="fg-js/anchor" id="' 
        + genId(context, gap, kind) 
        + '"></script>';
    return code;
};

/**
 * Find the anchor.
 * @param {Object} context - Fg containing the acnchor.
 * @param {Object} gap - Gap to which the acnchor is bind to.
 * @returns {Object} Dom element of the anchor.
 */
export function find(context: Component, gap: Gap, kind: string = 'df'): Anchor{
   	const id = genId(context, gap, kind);    
    return document.getElementById(id);
};

/**
 * Places some Html code next to the acnchor.
 * @param {Object} anchor - The anchor DOM element.
 * @param {string} position - Defines where code be placed. "after" and "before" are used relative to anchor node.
 * @param {string} html - HTML code to be placed.
 */

export function insertHTML(anchor: Anchor, position: string, html: string){   	
    let pos: string;
    switch (position){
        case "before": pos = "beforebegin"; break;
        case "after": pos = "afterend"; break;
    };
    anchor.insertAdjacentHTML(pos, html);
};